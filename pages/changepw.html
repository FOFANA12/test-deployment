<!DOCTYPE html>
<html lang="fr">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Changer mdp</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.8/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-sRIl4kxILFvY47J16cr9ZwB07vP4J8+LH7qKQnuqkuIAvNWLzeN8tE5YBujZqJLB" crossorigin="anonymous">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.min.css">
    <link rel="stylesheet" href="../Pages/style.css">
</head>

<body>
    <div class="container-fluid bg-white mb-2 shadow-sm border-bottom">
        <div class="d-flex align-items-center p-3">
            <a href="setting.html" class="text-dark text-decoration-none">
                <i class="bi bi-chevron-left fs-6"></i>
            </a>
            <h5 class="mb-0 fw-semibold flex-grow-1 text-center me-4">Profile</h5>
        </div>
    </div>

    <div class="form w-100 mt-4 px-3">
        <div class="mb-4 mt-3 position-relative">
            <label class="position-absolute px-2 ms-3 text-muted fs-6"
                style="top: -13px; z-index: 5; background: white;">Ancien mot de passe</label>
            <div class="border rounded-3 shadow-sm px-3 d-flex align-items-center" style="height: 40px;">
                <input type="password" id="oldPassword" class="form-control border-0 bg-transparent fs-6"
                    placeholder="6 - 20 caractères" style="box-shadow: none;">
            </div>
        </div>

        <div class="mb-4 mt-3 position-relative">
            <label class="position-absolute px-2 ms-3 text-muted fs-6"
                style="top: -13px; z-index: 5; background: white;">Nouveau mot de passe</label>
            <div class="border rounded-3 shadow-sm px-3 d-flex align-items-center" style="height: 40px;">
                <input type="password" id="newPassword" class="form-control border-0 bg-transparent fs-6"
                    placeholder="6 - 20 caractères" style="box-shadow: none;">
            </div>
        </div>

        <div class="mb-4 mt-3 position-relative">
            <label class="position-absolute px-2 ms-3 text-muted fs-6"
                style="top: -13px; z-index: 5; background: white;">Confirmer le nouveau mot de passe</label>
            <div class="border rounded-3 shadow-sm px-3 d-flex align-items-center" style="height: 40px;">
                <input type="password" id="confirmPassword" class="form-control border-0 bg-transparent fs-6"
                    placeholder="6 - 20 caractères" style="box-shadow: none;">
            </div>
        </div>

        <div class="form-check ms-2 mb-3">
            <input class="form-check-input" type="checkbox" id="rememberMe">
            <label class="form-check-label text-muted small" for="rememberMe">Se souvenir de moi</label>
        </div>

        <div class="d-flex justify-content-center">
            <button class="btn btn-primary text-white w-100" id="btnSubmitPassword">Réinitialiser le mot de
                passe</button>
        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.8/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-ENjdO4Dr2bkBIFxQpeoTz1HIcje39Wm4jDKdf19U8gI4ddQ3GYNS7NTKfAdVQSZe"
        crossorigin="anonymous"></script>

    <script>
        document.addEventListener("DOMContentLoaded", function () {
            const btnSubmit = document.getElementById("btnSubmitPassword");

            btnSubmit.addEventListener("click", function (e) {
                // Récupération des valeurs
                const oldPass = document.getElementById("oldPassword").value;
                const newPass = document.getElementById("newPassword").value;
                const confirmPass = document.getElementById("confirmPassword").value;
                const rememberMe = document.getElementById("rememberMe").checked;

                // 1. Vérification des champs vides
                if (!oldPass || !newPass || !confirmPass) {
                    alert("Veuillez remplir tous les champs.");
                    return;
                }

                // 2. Vérification de la longueur (6-20 caractères)
                if (newPass.length < 6 || newPass.length > 20) {
                    alert("Le nouveau mot de passe doit contenir entre 6 et 20 caractères.");
                    return;
                }

                // 3. Vérification de la correspondance
                if (newPass !== confirmPass) {
                    alert("Le nouveau mot de passe et la confirmation ne correspondent pas.");
                    return;
                }

                // --- Succès ---
                console.log("Ancien mot de passe:", oldPass);
                console.log("Nouveau mot de passe:", newPass);
                console.log("Se souvenir de moi:", rememberMe);

                // Simulation d'envoi à la base de données
                // Ici, on pourrait ouvrir ton "loadingModal" avant la redirection
                alert("Mot de passe réinitialisé avec succès !");

                // Redirection vers le profil
                window.location.href = "Profile.html";
            });
        });
    </script>
</body>

</html>